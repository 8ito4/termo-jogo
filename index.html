<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîë CHAVE - Bee Imers√£o 2025</title>
    <link rel="icon" href="https://em-content.zobj.net/source/apple/419/key_1f511.png" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #121212;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .company-logo {
            width: 50px;
            height: 50px;
        }

        .logo {
            font-size: 3rem;
            font-weight: bold;
            color: #FFD600;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .slogan {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #FFD600;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .help-button {
            position: absolute;
            top: 0;
            right: 0;
            background: #1a1a1a;
            border: 2px solid #FFD600;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: #FFD600;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .help-button:hover {
            background: #FFD600;
            color: #121212;
            transform: scale(1.1);
        }

        .game-container {
            max-width: 400px;
            width: 100%;
        }

        .game-board {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            gap: 6px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .word-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 6px;
            justify-content: center;
        }

        .letter-box {
            width: 70px;
            height: 70px;
            border: 2px solid #353535;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.6rem;
            font-weight: bold;
            text-transform: uppercase;
            background: #121212;
            color: #ffffff;
            transition: all 0.2s;
            border-radius: 3px;
            cursor: pointer;
            box-sizing: border-box;
            border-bottom-width: 2px;
            perspective: 1000px;
        }

        .letter-box.active {
            border-bottom: 8px solid #FFD600 !important;
            border-top: 2px solid #FFD600 !important;
            border-left: 2px solid #FFD600 !important;
            border-right: 2px solid #FFD600 !important;
            color: #fff;
            background: #181818;
            z-index: 2;
        }

        .letter-box.filled {
            border-color: #565758;
            background: #1a1a1a;
            color: #ffffff;
        }

        .letter-box.correct {
            background: #6aaa64 !important;
            color: white !important;
            border-color: #6aaa64 !important;
        }

        .letter-box.present {
            background: #c9b458 !important;
            color: white !important;
            border-color: #c9b458 !important;
        }

        .letter-box.absent {
            background: #787c7e !important;
            color: white !important;
            border-color: #787c7e !important;
        }

        /* Anima√ß√µes para verifica√ß√£o das letras */
        .letter-box.reveal-correct {
            animation: revealCorrect 0.6s ease-in-out forwards;
        }

        .letter-box.reveal-present {
            animation: revealPresent 0.6s ease-in-out forwards;
        }

        .letter-box.reveal-absent {
            animation: revealAbsent 0.6s ease-in-out forwards;
        }

        @keyframes revealCorrect {
            0% {
                background: #1a1a1a;
                border-color: #565758;
                transform: scale(1) rotateY(0deg);
            }
            50% {
                transform: scale(1.1) rotateY(90deg);
                background: #2a2a2a;
                border-color: #565758;
            }
            100% {
                background: #6aaa64;
                border-color: #6aaa64;
                color: white;
                transform: scale(1) rotateY(0deg);
            }
        }

        @keyframes revealPresent {
            0% {
                background: #1a1a1a;
                border-color: #565758;
                transform: scale(1) rotateY(0deg);
            }
            50% {
                transform: scale(1.1) rotateY(90deg);
                background: #2a2a2a;
                border-color: #565758;
            }
            100% {
                background: #c9b458;
                border-color: #c9b458;
                color: white;
                transform: scale(1) rotateY(0deg);
            }
        }

        @keyframes revealAbsent {
            0% {
                background: #1a1a1a;
                border-color: #565758;
                transform: scale(1) rotateY(0deg);
            }
            50% {
                transform: scale(1.1) rotateY(90deg);
                background: #2a2a2a;
                border-color: #565758;
            }
            100% {
                background: #787c7e;
                border-color: #787c7e;
                color: white;
                transform: scale(1) rotateY(0deg);
            }
        }

        /* Anima√ß√£o de sucesso para linha completa */
        .letter-box.bounce {
            animation: bounceSuccess 0.5s ease-in-out;
        }

        @keyframes bounceSuccess {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        .word-row.locked .letter-box {
            background: #2c2c2c;
            border-color: #353535;
            color: #888;
            cursor: default;
        }
        .word-row.active .letter-box {
            background: #121212;
            border: 2px solid #FFD600;
            color: #fff;
        }

        .keyboard {
            max-width: 580px;
            width: 100%;
            margin: 20px auto;
            user-select: none;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-bottom: 10px;
        }

        .key {
            background: #818384;
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            height: 58px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
            user-select: none;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .key.letter {
            width: 50px;
            min-width: 50px;
        }

        .key.wide {
            width: 90px;
            min-width: 90px;
            font-size: 0.95rem;
            font-weight: 600;
        }

        .key:hover {
            background: #9a9b9c;
            transform: translateY(-1px);
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }

        .key.correct {
            background: #6aaa64 !important;
            color: white !important;
        }

        .key.correct:hover {
            background: #5d9c57 !important;
        }

        .key.present {
            background: #c9b458 !important;
            color: white !important;
        }

        .key.present:hover {
            background: #b8a449 !important;
        }

        .key.absent {
            background: #3a3a3c !important;
            color: #878787 !important;
        }

        .key.absent:hover {
            background: #4a4a4a !important;
        }

        .key:active {
            transform: translateY(1px);
            box-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        /* Responsivo para mobile */
        @media (max-width: 600px) {
            .keyboard {
                max-width: 100%;
                padding: 0 10px;
            }
            
            .keyboard-row {
                gap: 4px;
                margin-bottom: 8px;
            }
            
            .key.letter {
                width: 36px;
                min-width: 36px;
                height: 48px;
                font-size: 1rem;
            }
            
            .key.wide {
                width: 60px;
                min-width: 60px;
                font-size: 0.85rem;
            }
        }

        /* Anima√ß√£o de pressionar tecla */
        .key.pressed {
            animation: keyPress 0.1s ease;
        }

        @keyframes keyPress {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        .message {
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            font-size: 1.1rem;
            min-height: 30px;
        }

        .error {
            color: #f85149;
        }

        .success {
            color: #FFD600;
            font-size: 1.5rem;
        }

        .defeat {
            color: #f85149;
            font-size: 1.3rem;
        }

        .game-over {
            text-align: center;
            margin-top: 20px;
        }

        .restart-btn {
            padding: 12px 24px;
            font-size: 1rem;
            background: #FFD600;
            color: #121212;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.3s ease;
            font-weight: bold;
        }

        .restart-btn:hover {
            background: #FFC107;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.92);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        /* Modal de login deve ter z-index maior */
        #loginModal {
            z-index: 1100;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: #1a1a1a;
            border: 2px solid #FFD600;
            border-radius: 12px;
            padding: 0;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow: hidden;
            position: relative;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            box-sizing: border-box;
        }

        .modal-overlay.show .modal {
            transform: scale(.9);
        }

        .modal-scroll {
            max-height: 70vh;
            overflow-y: auto;
            padding: 18px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal h3 {
            color: #FFD600;
            font-size: 1rem;
            margin: 0;
        }

        .close-button {
            background: none;
            border: none;
            color: #FFD600;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.3s ease;
        }

        .close-button:hover {
            color: #FFC107;
        }

        .modal p {
            color: #cccccc;
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 0.85rem;
        }

        .legend {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            color: #cccccc;
        }

        .legend-box {
            width: 25px;
            height: 25px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .modal-examples {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #3a3a3c;
        }

        .example-word {
            display: flex;
            gap: 5px;
            margin: 15px 0;
            justify-content: flex-start;
        }

        .example-box {
            width: 35px;
            height: 35px;
            border: 2px solid #3a3a3c;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 3px;
            color: white;
        }

        .example-box.correct {
            background: #6aaa64;
            border-color: #6aaa64;
        }

        .example-box.present {
            background: #c9b458;
            border-color: #c9b458;
        }

        .example-box.absent {
            background: #787c7e;
            border-color: #787c7e;
        }

        .example-box.normal {
            background: #121212;
            border-color: #565758;
        }

        .navbar {
            width: 100%;
            min-height: 56px;
            background: #181818;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #333;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2000;
        }
        .navbar-content {
            width: 100%;
            max-width: 720px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            box-sizing: border-box;
        }
        .navbar-left {
            display: flex;
            align-items: center;
        }
        .navbar-logo {
            height: 40px;
            width: auto;
        }
        .navbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .navbar-btn {
            background: #232323;
            color: #FFD600;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            display: flex;
            align-items: center;
        }
        .navbar-btn:hover {
            background: #FFD600;
            color: #181818;
        }
        .main-content {
            margin-top: 70px;
        }

        /* Input invis√≠vel para mobile */
        #mobileInput {
            position: absolute;
            opacity: 0;
            pointer-events: none;
            z-index: -1;
        }

        /* Login Modal Styles */
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .form-group input {
            background: #2a2a2a;
            border: 1px solid #353535;
            border-radius: 6px;
            padding: 10px;
            color: #ffffff;
            font-size: 1rem;
            outline: none;
        }

        .form-group input:focus {
            border-color: #FFD600;
            box-shadow: 0 0 5px rgba(255, 214, 0, 0.5);
        }

        .form-group input::placeholder {
            color: #666666;
            opacity: 1;
        }

        .form-group input:focus::placeholder {
            color: #888888;
        }

        .form-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .login-submit-btn, .login-cancel-btn {
            flex: 1;
            padding: 10px 15px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .login-submit-btn {
            background: #FFD600;
            color: #121212;
        }

        .login-submit-btn:hover {
            background: #FFC107;
        }

        .login-cancel-btn {
            background: #3a3a3c;
            color: #878787;
        }

        .login-cancel-btn:hover {
            background: #4a4a4a;
        }

        .login-error {
            color: #f85149;
            font-size: 0.85rem;
            margin-top: 10px;
            text-align: center;
        }

        .login-credentials {
            margin-top: 20px;
            text-align: center;
            color: #cccccc;
            font-size: 0.8rem;
        }

        /* Dropdown styles */
        .user-dropdown {
            position: absolute;
            top: 0;
            right: 0;
            background: #1a1a1a;
            border: 1px solid #FFD600;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 2000;
            display: none;
        }

        .dropdown-item {
            padding: 6px 10px;
            cursor: pointer;
            color: #cccccc;
            font-size: 0.9rem;
            transition: background 0.2s ease;
            white-space: nowrap;
            display: inline-block;
        }

        .dropdown-item:hover {
            background: #2a2a2a;
            color: #FFD600;
        }

        /* Estilos do Modal de Ranking */
        .ranking-list {
            background: #1a1a1a;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #333;
        }

        .ranking-item:last-child {
            border-bottom: none;
        }

        .ranking-position {
            width: 40px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .ranking-position.first {
            color: #FFD700;
        }

        .ranking-position.second {
            color: #C0C0C0;
        }

        .ranking-position.third {
            color: #CD7F32;
        }

        .ranking-medal {
            margin-right: 10px;
            font-size: 1.5rem;
        }

        .ranking-name {
            flex: 1;
            margin-left: 10px;
            font-weight: 500;
        }

        .ranking-score {
            font-weight: bold;
            color: #FFD600;
            min-width: 60px;
            text-align: right;
        }

        .ranking-games {
            font-size: 0.8rem;
            color: #888;
            margin-left: 10px;
            min-width: 80px;
            text-align: right;
        }

        /* Sistema de Pontua√ß√£o */
        .score-table {
            background: #1a1a1a;
            border-radius: 8px;
            margin: 15px 0;
            overflow: hidden;
        }

        .score-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 15px;
            border-bottom: 1px solid #333;
        }

        .score-row:last-child {
            border-bottom: none;
        }

        .score-row.header {
            background: #FFD600;
            color: #121212;
            font-weight: bold;
        }

        .score-row:nth-child(even) {
            background: #2a2a2a;
        }

        .correct-word-banner {
            background: #4a9eff;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(74, 158, 255, 0.3);
        }

        .countdown-info {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        .countdown-info h4 {
            color: #FFD600;
            margin: 0 0 10px 0;
            font-size: 1rem;
        }

        .countdown-time {
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 600px) {
            .letter-box {
                width: 52px;
                height: 52px;
                font-size: 2.2rem;
            }
            .key.letter {
                width: 28px;
                height: 38px;
                font-size: 0.9rem;
            }
            .key.wide {
                width: 45px;
                font-size: 0.8rem;
            }
        }

        /* Anima√ß√£o de tremida para linha inv√°lida */
        .shake {
            animation: shake 0.6s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-5px); }
            20% { transform: translateX(5px); }
            30% { transform: translateX(-5px); }
            40% { transform: translateX(5px); }
            50% { transform: translateX(-5px); }
            60% { transform: translateX(5px); }
            70% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
            90% { transform: translateX(-5px); }
        }

        /* Anima√ß√£o de erro para mensagem */
        .error-slide-in {
            animation: errorSlideIn 0.5s ease-out;
        }

        @keyframes errorSlideIn {
            0% {
                opacity: 0;
                transform: translateY(-20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <div class="navbar-left">
                <img src="https://i.imgur.com/xxb6Qk4.png" alt="Logo" class="navbar-logo" />
            </div>
            <div class="navbar-right">
                <button class="navbar-btn" id="infoBtn" title="Como jogar">‚ùì</button>
            </div>
        </div>
    </nav>
    <div class="main-content">
        <input id="mobileInput" type="text" maxlength="1" autocomplete="off" autocapitalize="characters" />
        <div class="header">
            <div class="logo-container">
                <div class="logo">üîë CHAVE</div>
            </div>
        </div>

    <!-- Modal de Instru√ß√µes -->
    <div class="modal-overlay" id="instructionsModal">
        <div class="modal">
            <div class="modal-scroll">
                <div class="modal-header">
                    <h3>Como Jogar</h3>
                    <button class="close-button" id="closeModal">&times;</button>
                </div>
                <p>Descubra a palavra secreta de 5 letras em at√© 6 tentativas!</p>
                <p>Depois de cada tentativa, as pe√ßas mostram o qu√£o perto voc√™ est√° da solu√ß√£o.</p>
                
                <div class="modal-examples">
                    <p><strong>Exemplos:</strong></p>
                    
                    <div class="example-word">
                        <div class="example-box correct">T</div>
                        <div class="example-box normal">U</div>
                        <div class="example-box normal">R</div>
                        <div class="example-box normal">M</div>
                        <div class="example-box normal">A</div>
                    </div>
                    <p>A letra <strong>T</strong> faz parte da palavra e est√° na posi√ß√£o correta.</p>
                    
                    <div class="example-word">
                        <div class="example-box normal">V</div>
                        <div class="example-box normal">I</div>
                        <div class="example-box present">O</div>
                        <div class="example-box normal">L</div>
                        <div class="example-box normal">A</div>
                    </div>
                    <p>A letra <strong>O</strong> faz parte da palavra mas em outra posi√ß√£o.</p>
                    
                    <div class="example-word">
                        <div class="example-box normal">P</div>
                        <div class="example-box normal">U</div>
                        <div class="example-box normal">L</div>
                        <div class="example-box absent">G</div>
                        <div class="example-box normal">A</div>
                    </div>
                    <p>A letra <strong>G</strong> n√£o faz parte da palavra.</p>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-box" style="background: #6aaa64;"></div>
                        <span>Letra correta e posi√ß√£o certa</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: #c9b458;"></div>
                        <span>Letra correta, posi√ß√£o errada</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box" style="background: #787c7e;"></div>
                        <span>Letra n√£o est√° na palavra</span>
                    </div>
                </div>
                
                <p style="margin-top: 20px;"><strong>Os acentos s√£o preenchidos automaticamente, e n√£o s√£o considerados nas dicas.</strong></p>
                <p><strong>As palavras podem possuir letras repetidas.</strong></p>
                <p><strong>Uma palavra nova aparece a cada partida.</strong></p>
            </div>
        </div>
    </div>

    <!-- Modal de Limite Di√°rio -->
    <div class="modal-overlay" id="dailyLimitModal">
        <div class="modal">
            <div class="modal-scroll">
                <div class="modal-header">
                    <h3>‚è∞ Voc√™ j√° jogou hoje!</h3>
                    <button class="close-button" id="closeDailyLimitModal">&times;</button>
                </div>
                <div style="text-align: center; padding: 20px 0;">
                    <div style="font-size: 4rem; margin-bottom: 15px;">‚è∞</div>
                    <h4 style="color: #FFD600; margin-bottom: 15px;">Palavra do dia conclu√≠da!</h4>
                    <p style="color: #cccccc; margin-bottom: 20px; line-height: 1.5;">
                        Voc√™ s√≥ pode jogar <strong>uma palavra por dia</strong>.<br>
                        Volte √† meia-noite para uma nova palavra!
                    </p>
                    <div style="background: #2a2a2a; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p style="color: #888888; font-size: 0.9rem; margin: 0;">
                            <strong>Pr√≥xima palavra em:</strong> <span id="modal-countdown">--:--:--</span>
                        </p>
                    </div>
                    
                    <!-- Mostrar resultado do jogo de hoje -->
                    <div id="today-result" style="background: #1a1a1a; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 3px solid #FFD600;">
                        <!-- Conte√∫do ser√° preenchido dinamicamente -->
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="login-submit-btn" onclick="closeDailyLimitModal()">ENTENDI</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Resultado Final -->
    <div class="modal-overlay" id="finalResultModal">
        <div class="modal">
            <div class="modal-scroll">
                <div class="modal-header">
                    <h3 id="final-result-title">üîì Parab√©ns!</h3>
                    <button class="close-button" id="closeFinalResultModal">&times;</button>
                </div>
                <div style="text-align: center; padding: 20px 0;">
                    <div id="final-result-icon" style="font-size: 4rem; margin-bottom: 15px;">üîì</div>
                    
                    <div id="final-result-content">
                        <!-- Conte√∫do ser√° preenchido dinamicamente -->
                    </div>
                    
                    <!-- Progresso visual das tentativas -->
                    <div style="margin: 25px 0;">
                        <h4 style="color: #FFD600; margin-bottom: 15px;">üìä Suas tentativas de hoje:</h4>
                        <div id="game-progress" style="display: flex; flex-direction: column; gap: 8px; max-width: 300px; margin: 0 auto;">
                            <!-- Ser√° preenchido dinamicamente -->
                        </div>
                    </div>
                    
                    <div style="background: #2a2a2a; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <p style="color: #888888; font-size: 0.9rem; margin: 0;">
                            <strong>Pr√≥xima palavra em:</strong> <span id="final-countdown">--:--:--</span>
                        </p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="login-submit-btn" onclick="closeFinalResultModal()">FECHAR</button>
                </div>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div id="correct-word-display" style="display: none;">
            <!-- Barra azul ser√° mostrada aqui quando necess√°rio -->
        </div>
        
        <!-- Mensagem de erro -->
        <div id="error-message" style="display: none; text-align: center; margin: 15px 0;">
            <div style="background: #f85149; color: white; padding: 12px 20px; border-radius: 8px; font-weight: bold; font-size: 1rem; display: inline-block; box-shadow: 0 2px 8px rgba(248, 81, 73, 0.3);">
                Essa palavra n√£o √© aceita
            </div>
        </div>
        
        <div class="game-board" id="gameBoard">
        </div>
        
        <!-- Contador da pr√≥xima palavra na tela -->
        <div id="next-word-countdown" style="display: none; text-align: center; margin: 25px 0;">
            <div style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #FFD600; max-width: 400px; margin: 0 auto;">
                <h3 style="color: #FFD600; margin: 0 0 15px 0; font-size: 1.2rem;">‚è∞ Pr√≥xima palavra em:</h3>
                <div id="main-countdown" style="color: #ffffff; font-size: 2rem; font-weight: bold; font-family: 'Courier New', monospace; letter-spacing: 2px;">
                    --:--:--
                </div>
                <p style="color: #888888; font-size: 0.9rem; margin: 15px 0 0 0;">
                    Uma nova palavra ser√° liberada √† meia-noite
                </p>
            </div>
        </div>
        
        <div class="keyboard" id="keyboard">
    <div class="keyboard-row">
        <button class="key letter" data-key="Q">Q</button>
        <button class="key letter" data-key="W">W</button>
        <button class="key letter" data-key="E">E</button>
        <button class="key letter" data-key="R">R</button>
        <button class="key letter" data-key="T">T</button>
        <button class="key letter" data-key="Y">Y</button>
        <button class="key letter" data-key="U">U</button>
        <button class="key letter" data-key="I">I</button>
        <button class="key letter" data-key="O">O</button>
        <button class="key letter" data-key="P">P</button>
    </div>
    <div class="keyboard-row">
        <button class="key letter" data-key="A">A</button>
        <button class="key letter" data-key="S">S</button>
        <button class="key letter" data-key="D">D</button>
        <button class="key letter" data-key="F">F</button>
        <button class="key letter" data-key="G">G</button>
        <button class="key letter" data-key="H">H</button>
        <button class="key letter" data-key="J">J</button>
        <button class="key letter" data-key="K">K</button>
        <button class="key letter" data-key="L">L</button>
    </div>
    <div class="keyboard-row">
        <button class="key wide" id="enterKey">ENTER</button>
        <button class="key letter" data-key="Z">Z</button>
        <button class="key letter" data-key="X">X</button>
        <button class="key letter" data-key="C">C</button>
        <button class="key letter" data-key="V">V</button>
        <button class="key letter" data-key="B">B</button>
        <button class="key letter" data-key="N">N</button>
        <button class="key letter" data-key="M">M</button>
        <button class="key wide" id="backspaceKey">‚å´</button>
    </div>
</div>

        
        <div id="message" class="message"></div>
        
        <div id="gameOver" class="game-over" style="display: none;">
            <button id="restartBtn" class="restart-btn">JOGAR NOVAMENTE</button>
        </div>
    </div>

    <script src="palavras.js"></script>
    <script>
        class ChaveGame {
            constructor() {
                // Palavras programadas por data (formato YYYY-MM-DD)
                this.dailyWords = {
                    '2025-01-11': 'DADOS',
                    '2025-01-12': 'LIDER',
                    '2025-01-13': 'GRUPO',
                    '2025-01-14': 'TROCA',
                    '2025-01-15': 'ROTAS',
                    '2025-01-16': 'FORMA',
                    '2025-01-17': 'FLUXO',
                    '2025-01-18': 'VISAO',
                    '2025-01-19': 'PONTO',
                    '2025-01-20': 'REAIS',
                    '2025-01-21': 'METAS',
                    '2025-01-22': 'JUNTO',
                    '2025-01-23': 'FOCAR',
                    '2025-01-24': 'IDEIA',
                    '2025-01-25': 'TIMES',
                    '2025-01-26': 'VALOR',
                    '2025-01-27': 'BONUS',
                    '2025-01-28': 'FAZER',
                    '2025-01-29': 'PLANO',
                    '2025-01-30': 'ACOES',
                    '2025-01-31': 'MIRAR',
                    '2025-02-01': 'GANHO',
                    '2025-02-02': 'CORRE',
                    '2025-02-03': 'LEADS',
                    '2025-02-04': 'MARCA',
                    '2025-02-05': 'EMAIL',
                    '2025-02-06': 'FALTA',
                    '2025-02-07': 'ATUAR',
                    '2025-02-08': 'MIDIA',
                    '2025-02-09': 'VENDA',
                    '2025-02-10': 'LOJAS',
                    '2025-02-11': 'MOVER',
                    '2025-02-12': 'PROVA',
                    '2025-02-13': 'FEIRA',
                    '2025-02-14': 'CURSO',
                    '2025-02-15': 'HORAS',
                    '2025-02-16': 'CARGO',
                    '2025-02-17': 'FIRMA',
                    '2025-02-18': 'CANAL',
                    '2025-02-19': 'SONHO',
                    '2025-02-20': 'MENTE',
                    '2025-02-21': 'LISTA',
                    '2025-02-22': 'CRIAR',
                    '2025-02-23': 'OLHAR',
                    '2025-02-24': 'PRECO',
                    '2025-02-25': 'FRETE',
                    '2025-02-26': 'CHAVE',
                    '2025-02-27': 'CRISE',
                    '2025-02-28': 'PRAZO',
                    '2025-03-01': 'CAUSA',
                    '2025-03-02': 'NOMES',
                    '2025-03-03': 'SITES',
                    '2025-03-04': 'ETICA',
                    '2025-03-05': 'TEXTO',
                    '2025-03-06': 'NUVEM',
                    '2025-03-07': 'VIDEO',
                    '2025-03-08': 'FRASE',
                    '2025-03-09': 'RODAR',
                    '2025-03-10': 'MAPAS',
                    '2025-03-11': 'TESTE',
                    '2025-03-12': 'RITMO',
                    '2025-03-13': 'LOGIN',
                    '2025-03-14': 'AUDIO',
                    '2025-03-15': 'GUIAS',
                    '2025-03-16': 'FORCA',
                    '2025-03-17': 'CARGA',
                    '2025-03-18': 'SORTE',
                    '2025-03-19': 'CHAMA',
                    '2025-03-20': 'FORTE',
                    '2025-03-21': 'CAIXA',
                    '2025-03-22': 'GUIAR',
                    '2025-03-23': 'FICHA',
                    '2025-03-24': 'RUMOS',
                    '2025-03-25': 'VAZAO',
                    '2025-03-26': 'CONTA',
                    '2025-03-27': 'UNICO',
                    '2025-03-28': 'UNIAO',
                    '2025-03-29': 'BASES',
                    '2025-03-30': 'MEDIA',
                    '2025-03-31': 'CORPO',
                    '2025-04-01': 'CERTO',
                    '2025-04-02': 'CUSTO',
                    '2025-04-03': 'ETAPA',
                    '2025-04-04': 'GRANA',
                    '2025-04-05': 'IDEAL',
                    '2025-04-06': 'LANCE',
                    '2025-04-07': 'NIVEL',
                    '2025-04-08': 'ORCAR',
                    '2025-04-09': 'PAPEL',
                    '2025-04-10': 'VISTA',
                    '2025-04-11': 'COTAR',
                    '2025-04-12': 'LUCRO',
                    '2025-04-13': 'FROTA',
                    '2025-04-14': 'BUSCA',
                    '2025-04-15': 'NOTAS',
                    '2025-04-16': 'EXCEL'
                };
                
                this.fallbackWords = [
                    'DADOS', 'LIDER', 'GRUPO', 'TROCA', 'ROTAS',
                    'FORMA', 'FLUXO', 'VISAO', 'PONTO', 'REAIS',
                    'METAS', 'JUNTO', 'FOCAR', 'IDEIA', 'TIMES'
                ];

                // Inicializa com palavras b√°sicas para funcionar imediatamente
                const basicWords = [
                    ...Object.values(this.dailyWords),
                    ...this.fallbackWords,
                    'ABACO', 'ABADE', 'ABAFA', 'ABALO', 'ABANA', 'ABANO', 'ABATE', 'ABETO', 'ABISMO',
                    'ABITO', 'ABOBA', 'ABONO', 'ABRIR', 'ABUSO', 'ACABA', 'ACASO', 'ACATA', 'ACENA',
                    'ACHAR', 'ACIDO', 'ACIMA', 'ACOES', 'ACOLA', 'ACRES', 'ACUAR', 'ADAGA', 'ADEUS',
                    'CHAVE', 'DADOS', 'FESTA', 'GATOS', 'HOTEL', 'IDEAL', 'JORGE', 'KIWIS', 'LUNAR',
                    'MANHA', 'NUVEM', 'OASIS', 'PAPEL', 'QUERO', 'RATOS', 'SUPER', 'TERRA', 'URUBU',
                    'VERDE', 'WATER', 'XICAR', 'ZEBRA'
                ];
                this.validWords = new Set(basicWords.map(word => word.toUpperCase()));
                this.isLoadingWords = false; // Sempre false para n√£o bloquear
                
                // Inicializa estado do jogo
                this.targetWord = this.getTodaysWord();
                this.currentRow = 0;
                this.currentCol = 0;
                this.gameOver = false;
                this.maxAttempts = 6;
                this.currentGuess = ['', '', '', '', ''];
                this.letterStates = {}; 
                this.gameHistory = []; // Para armazenar o hist√≥rico das tentativas
                this.countdownInterval = null; // Para controlar o countdown
                
                console.log('üéÆ Jogo inicializado com palavras b√°sicas:', this.validWords.size);
                
                // Carrega o l√©xico brasileiro em background (n√£o bloqueia o jogo)
                this.loadPortugueseLexicon().then(() => {
                    console.log('üìö L√©xico completo carregado:', this.validWords.size, 'palavras');
                }).catch(e => {
                    console.warn('‚ö†Ô∏è Erro ao carregar l√©xico completo, usando b√°sico:', e);
                });
                
                this.initializeBoard();
                this.bindEvents();
                this.checkTodayStatus();
                this.mobileInput = document.getElementById('mobileInput');
                this.mobileInput.addEventListener('input', (e) => {
                    const val = e.target.value.toUpperCase();
                    if (/^[A-Z]$/.test(val)) {
                        this.handleLetterInput(val);
                    }
                    e.target.value = '';
                });
            }

            async loadPortugueseLexicon() {
                try {
                    console.log('Carregando l√©xico portugu√™s do arquivo local...');
                    
                    // Verifica se o arquivo de palavras foi carregado
                    if (typeof window.PALAVRAS_5_LETRAS !== 'undefined' && Array.isArray(window.PALAVRAS_5_LETRAS)) {
                        // Usa as palavras do arquivo
                        const words = window.PALAVRAS_5_LETRAS
                            .map(word => word.trim().toUpperCase())
                            .filter(word => word.length === 5) // Garante apenas palavras de 5 letras
                            .filter(word => /^[A-Z√Å√Ä√Ç√É√Ñ√â√à√ä√ã√ç√å√é√è√ì√í√î√ï√ñ√ö√ô√õ√ú√á]+$/.test(word)); // Apenas letras portuguesas
                        
                        // Adiciona palavras do jogo tamb√©m
                        const gameWords = Object.values(this.dailyWords).concat(this.fallbackWords);
                        gameWords.forEach(word => words.push(word.toUpperCase()));
                        
                        // Cria set com todas as palavras
                        this.validWords = new Set(words);
                        
                        console.log(`‚úÖ L√©xico carregado do arquivo: ${this.validWords.size} palavras de 5 letras`);
                        
                    } else {
                        throw new Error('Arquivo de palavras n√£o encontrado ou vazio');
                    }
                    
                } catch (error) {
                    console.error('‚ùå Erro ao carregar l√©xico do arquivo:', error);
                    console.log('üîÑ Usando palavras padr√£o como fallback...');
                    
                    // Fallback para palavras b√°sicas se falhar
                    const basicWords = [
                        // Palavras do jogo
                        ...Object.values(this.dailyWords),
                        ...this.fallbackWords,
                        // Algumas palavras comuns portuguesas como exemplo
                        'ABACO', 'ABADE', 'ABAFA', 'ABALO', 'ABANA', 'ABANO', 'ABATE', 'ABETO', 'ABISMO',
                        'ABITO', 'ABOBA', 'ABONO', 'ABRIR', 'ABUSO', 'ACABA', 'ACASO', 'ACATA', 'ACENA',
                        'ACHAR', 'ACIDO', 'ACIMA', 'ACOES', 'ACOLA', 'ACRES', 'ACUAR', 'ADAGA', 'ADEUS',
                        'ADUBO', 'AEREO', 'AFAGO', 'AFIAR', 'AFINS', 'AFORA', 'AGAPE', 'AGAVE', 'AGEIS',
                        'AGILE', 'AGIOS', 'AGORA', 'AGUDO', 'AJUDA', 'ALADO', 'ALBUM', 'ALDEA', 'ALEGA',
                        'CHAVE', 'DADOS', 'FESTA', 'GATOS', 'HOTEL', 'IDEAL', 'JORGE', 'KIWIS', 'LUNAR',
                        'MANHA', 'NUVEM', 'OASIS', 'PAPEL', 'QUERO', 'RATOS', 'SUPER', 'TERRA', 'URUBU',
                        'VERDE', 'WATER', 'XICAR', 'ZEBRA'
                    ];
                    
                    this.validWords = new Set(basicWords.map(word => word.toUpperCase()));
                }
            }

            getCurrentDate() {
                const today = new Date();
                return today.getFullYear() + '-' + 
                       String(today.getMonth() + 1).padStart(2, '0') + '-' + 
                       String(today.getDate()).padStart(2, '0');
            }

            getTodaysWord() {
                const today = this.getCurrentDate();
                return this.dailyWords[today] || this.fallbackWords[0];
            }

            checkTodayStatus() {
                const today = this.getCurrentDate();
                const gameData = localStorage.getItem(`chave_game_${today}`);
                
                if (gameData) {
                    const data = JSON.parse(gameData);
                    this.reconstructGameState(data);
                    this.startCountdown(); // Inicia countdown apenas se j√° jogou
                    // N√£o mostra mais modal, apenas reconstr√≥i o estado
                } else {
                    // Primeira vez jogando hoje - jogo deve estar ativo
                    this.gameOver = false;
                    this.currentRow = 0;
                    this.currentCol = 0;
                    this.currentGuess = ['', '', '', '', ''];
                    this.updateActiveBox(); // Garante que a primeira caixa esteja ativa
                    this.showInstructionsOnStart();
                }
            }

            reconstructGameState(gameData) {
                // Reconstr√≥i o estado visual do jogo baseado no hist√≥rico salvo
                this.gameOver = true; // Marca o jogo como terminado
                this.targetWord = gameData.word;
                this.gameHistory = gameData.history || [];
                this.currentRow = gameData.attempts;
                
                // Se perdeu, mostra a barra azul com a palavra certa
                if (!gameData.won) {
                    const correctWordDisplay = document.getElementById('correct-word-display');
                    correctWordDisplay.innerHTML = `<div class="correct-word-banner">palavra certa: ${gameData.word.toLowerCase()}</div>`;
                    correctWordDisplay.style.display = 'block';
                }
                
                // Mostra o countdown na tela principal
                document.getElementById('next-word-countdown').style.display = 'block';
                
                // Reconstr√≥i apenas as linhas que foram jogadas
                gameData.history.forEach((attempt, rowIndex) => {
                    const guess = attempt.guess;
                    const results = attempt.results;
                    
                    // Preenche as letras da linha
                    for (let colIndex = 0; colIndex < 5; colIndex++) {
                        const box = document.getElementById(`box-${rowIndex}-${colIndex}`);
                        if (box) {
                            let letter = guess[colIndex];
                            const result = results[colIndex];
                            
                            // Se acertou a posi√ß√£o e a letra correta for √á, mostra √á
                            if (result === 'correct' && this.targetWord[colIndex] === '√á') {
                                letter = '√á';
                            }
                            
                            box.textContent = letter;
                            box.classList.remove('filled', 'active');
                            box.classList.add(result); // Adiciona a classe de cor (correct, present, absent)
                            
                            // Atualiza o estado do teclado
                            this.updateKeyboardKey(letter, result);
                        }
                    }
                    
                    // Remove classes de estado da linha jogada
                    const row = document.getElementById(`row-${rowIndex}`);
                    if (row) {
                        row.classList.remove('active', 'locked');
                        row.style.display = 'grid'; // Garante que a linha est√° vis√≠vel
                    }
                });
                
                // Esconde todas as linhas n√£o jogadas
                for (let i = gameData.attempts; i < this.maxAttempts; i++) {
                    const row = document.getElementById(`row-${i}`);
                    if (row) {
                        row.style.display = 'none';
                    }
                }
                
                // Remove qualquer caixa ativa
                document.querySelectorAll('.letter-box').forEach(box => {
                    box.classList.remove('active');
                });
            }

            showDailyLimitModal(gameData) {
                // N√£o mostra mais o modal automaticamente quando recarrega
                // O usu√°rio j√° v√™ o estado do jogo diretamente no tabuleiro
                return;
            }

            startCountdown() {
                // Para qualquer countdown anterior
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                }
                
                this.updateCountdown();
                // Atualiza a cada segundo
                this.countdownInterval = setInterval(() => {
                    this.updateCountdown();
                }, 1000);
            }

            updateCountdown() {
                const now = new Date();
                const tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(0, 0, 0, 0);
                
                const timeLeft = tomorrow - now;
                
                const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                const countdown = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                // Atualiza todos os elementos de countdown (modais e tela principal)
                const countdownElements = ['modal-countdown', 'final-countdown', 'main-countdown'];
                countdownElements.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = countdown;
                    }
                });
                
                // Se chegou √† meia-noite, recarrega a p√°gina
                if (timeLeft <= 0) {
                    location.reload();
                }
            }

            showInstructionsOnStart() {
                const modal = document.getElementById('instructionsModal');
                modal.classList.add('show');
                
                // Fecha automaticamente ap√≥s 5 segundos para n√£o interferir com o teclado
                setTimeout(() => {
                    modal.classList.remove('show');
                }, 5000);
            }

            initializeBoard() {
                const board = document.getElementById('gameBoard');
                board.innerHTML = '';
                
                for (let i = 0; i < this.maxAttempts; i++) {
                    const row = document.createElement('div');
                    row.className = 'word-row';
                    row.id = `row-${i}`;
                    if (i === this.currentRow) {
                        row.classList.add('active');
                    } else if (i > this.currentRow) {
                        row.classList.add('locked');
                    }
                    
                    for (let j = 0; j < 5; j++) {
                        const box = document.createElement('div');
                        box.className = 'letter-box';
                        box.id = `box-${i}-${j}`;
                        box.addEventListener('click', () => this.focusBox(i, j));
                        row.appendChild(box);
                    }
                    
                    board.appendChild(row);
                }
                
                this.updateActiveBox();
            }

            focusBox(row, col) {
                if (row !== this.currentRow || this.gameOver) return;
                
                console.log('üì± Clique na caixa:', row, col);
                this.currentCol = col;
                this.updateActiveBox();
                
                // S√≥ foca o input invis√≠vel em dispositivos m√≥veis
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                if (isMobile && this.mobileInput) {
                    console.log('üì± Dispositivo m√≥vel detectado - focando input invis√≠vel');
                    this.mobileInput.value = '';
                    this.mobileInput.focus();
                } else {
                    console.log('üñ•Ô∏è Desktop - mantendo foco no document para teclado f√≠sico');
                    // Garante que o foco n√£o fica numa caixa espec√≠fica
                    document.activeElement.blur();
                    document.body.focus();
                }
            }

            updateActiveBox() {
                // Remove active/locked de todas as linhas
                document.querySelectorAll('.word-row').forEach(row => {
                    row.classList.remove('active', 'locked');
                });
                // Adiciona active na linha atual, locked nas pr√≥ximas
                for (let i = 0; i < this.maxAttempts; i++) {
                    const row = document.getElementById(`row-${i}`);
                    if (i === this.currentRow && !this.gameOver) {
                        row.classList.add('active');
                    } else if (i > this.currentRow) {
                        row.classList.add('locked');
                    }
                }
                // Remove active de todas as caixas
                document.querySelectorAll('.letter-box').forEach(box => {
                    box.classList.remove('active');
                });
                // Adiciona active na caixa atual se o jogo n√£o acabou
                if (this.currentRow < this.maxAttempts && !this.gameOver) {
                    const activeBox = document.getElementById(`box-${this.currentRow}-${this.currentCol}`);
                    if (activeBox && !activeBox.classList.contains('correct', 'present', 'absent')) {
                        activeBox.classList.add('active');
                    }
                }
            }

            bindEvents() {
                const restartBtn = document.getElementById('restartBtn');
                const helpButton = document.getElementById('infoBtn');
                const closeModal = document.getElementById('closeModal');
                const modal = document.getElementById('instructionsModal');

                // Remove o bot√£o de restart do HTML pois n√£o ser√° mais usado
                if (restartBtn) {
                    restartBtn.style.display = 'none';
                }

                // Eventos do modal
                helpButton.addEventListener('click', () => {
                    modal.classList.add('show');
                });

                closeModal.addEventListener('click', () => {
                    modal.classList.remove('show');
                });

                // Fechar modal clicando fora dele
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('show');
                    }
                });

                // Eventos do teclado virtual - Sistema Simples
                this.setupVirtualKeyboard();
                
                // Salva refer√™ncia do jogo globalmente
                window.gameInstance = this;
            }

            setupVirtualKeyboard() {
                // Eventos das letras
                document.querySelectorAll('.key.letter').forEach(key => {
                    key.addEventListener('click', () => {
                        this.animateKeyPress(key);
                        const letter = key.dataset.key;
                        this.handleLetterInput(letter);
                    });
                });

                // Evento do Enter
                const enterKey = document.getElementById('enterKey');
                if (enterKey) {
                    enterKey.addEventListener('click', () => {
                        this.animateKeyPress(enterKey);
                        this.handleEnterInput();
                    });
                }

                // Evento do Backspace
                const backspaceKey = document.getElementById('backspaceKey');
                if (backspaceKey) {
                    backspaceKey.addEventListener('click', () => {
                        this.animateKeyPress(backspaceKey);
                        this.handleBackspaceInput();
                    });
                }
            }

            // M√©todos simplificados para input
            handleLetterInput(letter) {
                console.log('handleLetterInput chamado:', letter, 'gameOver:', this.gameOver, 'currentRow:', this.currentRow);
                
                if (this.gameOver || this.currentRow >= this.maxAttempts) {
                    console.log('Bloqueado - jogo terminado ou limite de tentativas');
                    return;
                }

                // Garante que currentCol est√° dentro do range v√°lido
                if (this.currentCol < 0) this.currentCol = 0;
                if (this.currentCol > 4) this.currentCol = 4;

                // Permite preencher a posi√ß√£o atual ou a primeira posi√ß√£o vazia
                let targetCol = this.currentCol;
                
                // Se a posi√ß√£o atual j√° est√° preenchida, procura a pr√≥xima vazia
                if (this.currentGuess[targetCol] && this.currentGuess[targetCol].trim() !== '') {
                    // Procura a primeira posi√ß√£o vazia na linha atual
                    for (let i = 0; i < 5; i++) {
                        if (!this.currentGuess[i] || this.currentGuess[i].trim() === '') {
                            targetCol = i;
                            break;
                        }
                    }
                    // Se n√£o encontrou posi√ß√£o vazia, n√£o faz nada
                    if (this.currentGuess[targetCol] && this.currentGuess[targetCol].trim() !== '') {
                        console.log('Linha cheia, n√£o pode adicionar mais letras');
                        return;
                    }
                }

                console.log('Adicionando letra', letter, 'na posi√ß√£o', targetCol);
                
                this.currentGuess[targetCol] = letter;
                this.currentCol = targetCol;

                const box = document.getElementById(`box-${this.currentRow}-${targetCol}`);
                if (box) {
                    box.textContent = letter;
                    box.classList.add('filled');
                    console.log('Letra adicionada ao DOM');
                } else {
                    console.log('Erro: caixa n√£o encontrada', `box-${this.currentRow}-${targetCol}`);
                }

                // Move para a pr√≥xima posi√ß√£o se n√£o estiver na √∫ltima
                if (targetCol < 4) {
                    let nextCol = targetCol + 1;
                    this.currentCol = nextCol;
                }
                
                this.updateActiveBox();
                console.log('Estado ap√≥s adicionar:', this.currentGuess, 'currentCol:', this.currentCol);
            }

            handleEnterInput() {
                console.log('üöÄ handleEnterInput CHAMADO');
                console.log('üìä Estado atual:', {
                    currentRow: this.currentRow,
                    maxAttempts: this.maxAttempts,
                    currentGuess: this.currentGuess,
                    gameOver: this.gameOver
                });
                
                // Verifica se √© poss√≠vel jogar
                if (this.currentRow >= this.maxAttempts) {
                    console.log('‚ùå Limite de tentativas atingido');
                    return;
                }
                
                // Verifica se a palavra est√° completa
                const isComplete = this.currentGuess.every(l => l && l.trim() !== '');
                console.log('üìù Palavra completa?', isComplete, this.currentGuess);
                
                if (!isComplete) {
                    console.log('‚ùå Palavra incompleta');
                    this.showErrorMessage('A palavra deve ter exatamente 5 letras!');
                    this.shakeCurrentRow();
                    return;
                }
                
                // Monta a palavra
                const guess = this.currentGuess.join('').toUpperCase();
                console.log('üéØ Tentativa:', guess);
                
                // Valida a palavra
                if (!this.isValidWord(guess)) {
                    console.log('‚ùå Palavra inv√°lida:', guess);
                    this.showErrorMessage('Essa palavra n√£o √© aceita');
                    this.shakeCurrentRow();
                    return;
                }
                
                // Processa a tentativa
                console.log('‚úÖ Processando tentativa v√°lida:', guess);
                const guessNorm = normalizeCcedil(guess);
                const targetNorm = normalizeCcedil(this.targetWord);
                this.processGuess(guess, guessNorm, targetNorm);
            }

            handleBackspaceInput() {
                console.log('‚¨ÖÔ∏è handleBackspaceInput CHAMADO');
                console.log('üìä Estado atual:', {
                    currentRow: this.currentRow,
                    currentCol: this.currentCol,
                    currentGuess: this.currentGuess
                });
                
                // Permite usar backspace sempre (at√© durante jogo terminado para debug)
                if (this.currentRow >= this.maxAttempts) {
                    console.log('‚ö†Ô∏è Jogo terminado, mas permitindo backspace para debug');
                }

                // L√≥gica simples: remove a √∫ltima letra digitada
                let removeu = false;
                
                // Primeiro: tenta remover da posi√ß√£o atual se tiver letra
                if (this.currentCol >= 0 && this.currentCol < 5 && 
                    this.currentGuess[this.currentCol] && 
                    this.currentGuess[this.currentCol].trim() !== '') {
                    
                    console.log('üóëÔ∏è Removendo letra da posi√ß√£o atual:', this.currentCol);
                    this.currentGuess[this.currentCol] = '';
                    const box = document.getElementById(`box-${this.currentRow}-${this.currentCol}`);
                    if (box) {
                        box.textContent = '';
                        box.classList.remove('filled');
                    }
                    removeu = true;
                } else {
                    // Sen√£o: procura a √∫ltima letra preenchida e remove
                    for (let i = 4; i >= 0; i--) {
                        if (this.currentGuess[i] && this.currentGuess[i].trim() !== '') {
                            console.log('üóëÔ∏è Removendo √∫ltima letra da posi√ß√£o:', i);
                            this.currentGuess[i] = '';
                            this.currentCol = i;
                            const box = document.getElementById(`box-${this.currentRow}-${i}`);
                            if (box) {
                                box.textContent = '';
                                box.classList.remove('filled');
                            }
                            removeu = true;
                            break;
                        }
                    }
                }

                if (removeu) {
                    console.log('‚úÖ Letra removida. Novo estado:', this.currentGuess);
                } else {
                    console.log('‚ÑπÔ∏è Nenhuma letra para remover');
                }

                this.updateActiveBox();
            }

            // M√©todo moveCursor mantido para compatibilidade
            moveCursor(direction) {
                if (this.gameOver || this.currentRow >= this.maxAttempts) return;
                
                const newCol = this.currentCol + direction;
                if (newCol >= 0 && newCol <= 4) {
                    this.currentCol = newCol;
                    this.updateActiveBox();
                }
            }

            animateKeyPress(keyElement) {
                keyElement.classList.add('pressed');
                setTimeout(() => {
                    keyElement.classList.remove('pressed');
                }, 100);
            }

            isValidWord(word) {
                // Normaliza a palavra para verifica√ß√£o (remove acentos, converte √á para C)
                const normalizedWord = this.normalizeForValidation(word);
                return this.validWords.has(normalizedWord);
            }

            normalizeForValidation(word) {
                return word
                    .toUpperCase()
                    .replace(/[√Å√Ä√Ç√É√Ñ]/g, 'A')
                    .replace(/[√â√à√ä√ã]/g, 'E')
                    .replace(/[√ç√å√é√è]/g, 'I')
                    .replace(/[√ì√í√î√ï√ñ]/g, 'O')
                    .replace(/[√ö√ô√õ√ú]/g, 'U')
                    .replace(/√á/g, 'C');
            }

            compareGuess(guessNorm, targetNorm) {
                const targetLetters = targetNorm.split('');
                const guessLetters = guessNorm.split('');
                const results = new Array(5).fill('absent');

                // Primeira passada: marca as letras corretas na posi√ß√£o certa
                for (let i = 0; i < 5; i++) {
                    if (guessLetters[i] === targetLetters[i]) {
                        results[i] = 'correct';
                        targetLetters[i] = null;
                        guessLetters[i] = null;
                    }
                }

                // Segunda passada: marca as letras corretas na posi√ß√£o errada
                for (let i = 0; i < 5; i++) {
                    if (guessLetters[i] !== null) {
                        const targetIndex = targetLetters.indexOf(guessLetters[i]);
                        if (targetIndex !== -1) {
                            results[i] = 'present';
                            targetLetters[targetIndex] = null;
                        }
                    }
                }

                return results;
            }

            processGuess(guess, guessNorm, targetNorm) {
                const results = this.compareGuess(guessNorm, targetNorm);
                const boxes = Array.from(document.querySelectorAll(`[id^="box-${this.currentRow}-"]`));
                
                // Armazena a tentativa no hist√≥rico
                this.gameHistory.push({
                    guess: guess,
                    results: results
                });
                
                // Desabilita input durante a anima√ß√£o
                this.gameOver = true;
                
                // Anima cada letra sequencialmente
                this.animateLetterReveal(boxes, guess, results, () => {
                    this.currentRow++;
                    this.currentCol = 0;
                    this.currentGuess = ['', '', '', '', ''];
                    
                    // Verifica condi√ß√µes de fim de jogo
                    if (guessNorm === targetNorm) {
                        const palavraCorrigida = restoreCcedil(guessNorm, this.targetWord);
                        this.endGame(true, palavraCorrigida);
                    } else if (this.currentRow >= this.maxAttempts) {
                        this.endGame(false);
                    } else {
                        // Reabilita input para pr√≥xima tentativa
                        this.gameOver = false;
                        this.updateActiveBox();
                    }
                });
            }

            animateLetterReveal(boxes, guess, results, callback) {
                const originalGuess = guess.split('');
                
                boxes.forEach((box, i) => {
                    setTimeout(() => {
                        let letter = originalGuess[i];
                        const result = results[i];

                        // Se acertou a posi√ß√£o e a letra correta for √á, mostra √á
                        if (result === 'correct' && this.targetWord[i] === '√á') {
                            letter = '√á';
                        }
                        
                        box.textContent = letter;
                        box.classList.remove('filled', 'active');
                        
                        // Adiciona anima√ß√£o espec√≠fica baseada no resultado
                        box.classList.add(`reveal-${result}`);
                        
                        // Ap√≥s a anima√ß√£o, aplica a classe final correta
                        setTimeout(() => {
                            box.classList.remove(`reveal-${result}`);
                            box.classList.add(result);
                            this.updateKeyboardKey(letter, result);
                        }, 600);
                        
                        // Se √© a √∫ltima letra, chama o callback ap√≥s a anima√ß√£o
                        if (i === boxes.length - 1) {
                            setTimeout(() => {
                                // Se todas est√£o corretas, adiciona anima√ß√£o de sucesso
                                if (results.every(r => r === 'correct')) {
                                    boxes.forEach((box, j) => {
                                        setTimeout(() => {
                                            box.classList.add('bounce');
                                            setTimeout(() => box.classList.remove('bounce'), 500);
                                        }, j * 100);
                                    });
                                }
                                callback();
                            }, 700);
                        }
                    }, i * 150);
                });
            }

            updateKeyboardKey(letter, result) {
                const keyElement = document.querySelector(`[data-key="${letter}"]`);
                if (!keyElement) return;
                
                const currentState = this.letterStates[letter];
                
                // Prioridade: correct > present > absent
                if (result === 'correct' || (!currentState && result === 'present') || (!currentState && result === 'absent')) {
                    this.letterStates[letter] = result;
                    keyElement.classList.remove('correct', 'present', 'absent');
                    keyElement.classList.add(result);
                }
            }

            saveGameResult(won, attempts) {
                const today = this.getCurrentDate();
                const gameData = {
                    date: today,
                    word: this.targetWord,
                    won: won,
                    attempts: attempts,
                    history: this.gameHistory,
                    timestamp: new Date().getTime()
                };
                
                localStorage.setItem(`chave_game_${today}`, JSON.stringify(gameData));
                return gameData;
            }

            generateGameProgress() {
                const progressHtml = this.gameHistory.map((attempt, index) => {
                    const rowHtml = attempt.results.map((result, i) => {
                        let letter = attempt.guess[i];
                        
                        // Se acertou a posi√ß√£o e a letra correta for √á, mostra √á
                        if (result === 'correct' && this.targetWord[i] === '√á') {
                            letter = '√á';
                        }
                        
                        let bgColor = '#787c7e'; // absent
                        if (result === 'correct') bgColor = '#6aaa64';
                        else if (result === 'present') bgColor = '#c9b458';
                        
                        return `<div style="
                            width: 30px;
                            height: 30px;
                            background: ${bgColor};
                            border: 1px solid ${bgColor};
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 1rem;
                            font-weight: bold;
                            color: white;
                            border-radius: 3px;
                        ">${letter}</div>`;
                    }).join('');
                    
                    return `<div style="display: flex; gap: 5px; justify-content: center;">${rowHtml}</div>`;
                }).join('');
                
                return progressHtml;
            }

            endGame(won, palavraCorrigida) {
                this.gameOver = true;
                const attempts = this.currentRow;
                
                console.log('üèÅ Jogo terminado:', { won, attempts, targetWord: this.targetWord });
                
                // Salva o resultado no localStorage
                this.saveGameResult(won, attempts);
                
                // Se perdeu, mostra a palavra correta na tela IMEDIATAMENTE
                if (!won) {
                    console.log('‚ùå Derrota - mostrando palavra correta na tela');
                    const correctWordDisplay = document.getElementById('correct-word-display');
                    correctWordDisplay.innerHTML = `<div class="correct-word-banner">palavra certa: ${this.targetWord.toLowerCase()}</div>`;
                    correctWordDisplay.style.display = 'block';
                    
                    // Mostra tamb√©m o countdown na tela principal
                    setTimeout(() => {
                        document.getElementById('next-word-countdown').style.display = 'block';
                    }, 1000);
                }
                
                // Esconde bot√µes do jogo
                const gameOverDiv = document.getElementById('gameOver');
                if (gameOverDiv) {
                    gameOverDiv.style.display = 'none';
                }
                
                // Configura e mostra o modal de resultado final (ap√≥s um delay)
                setTimeout(() => {
                    this.showFinalResultModal(won, palavraCorrigida, attempts);
                }, 1500); // Aumentei o delay para dar tempo de ver a palavra na tela
            }

            showFinalResultModal(won, palavraCorrigida, attempts) {
                const modal = document.getElementById('finalResultModal');
                const title = document.getElementById('final-result-title');
                const icon = document.getElementById('final-result-icon');
                const content = document.getElementById('final-result-content');
                const progress = document.getElementById('game-progress');
                
                if (won) {
                    title.textContent = 'üîì CHAVE DESBLOQUEADA!';
                    icon.textContent = 'üîì';
                    content.innerHTML = `
                        <h4 style="color: #6aaa64; margin-bottom: 15px;">Parab√©ns! Voc√™ conseguiu!</h4>
                        <p style="color: #cccccc; margin-bottom: 8px;">Palavra: <strong>${palavraCorrigida || this.targetWord}</strong></p>
                        <p style="color: #cccccc; margin: 0;">Acertou na <strong>${attempts}¬™ tentativa</strong></p>
                    `;
                } else {
                    title.textContent = '‚ùå Que pena!';
                    icon.textContent = '‚ùå';
                    content.innerHTML = `
                        <div class="correct-word-banner">palavra certa: ${this.targetWord.toLowerCase()}</div>
                        <h4 style="color: #f85149; margin-bottom: 15px;">N√£o foi dessa vez!</h4>
                        <p style="color: #cccccc; margin: 0;">Tentativas: <strong>${attempts}/${this.maxAttempts}</strong></p>
                    `;
                }
                
                // Gera o progresso visual
                progress.innerHTML = this.generateGameProgress();
                
                // Inicia o countdown apenas ap√≥s terminar o jogo
                this.startCountdown();
                
                // Mostra o countdown na tela principal ap√≥s fechar o modal
                setTimeout(() => {
                    document.getElementById('next-word-countdown').style.display = 'block';
                }, 500);
                
                modal.classList.add('show');
            }

            showErrorMessage(text) {
                const errorDiv = document.getElementById('error-message');
                const messageContent = errorDiv.querySelector('div');
                
                // Atualiza o texto da mensagem
                messageContent.textContent = text;
                
                // Mostra a mensagem com anima√ß√£o
                errorDiv.style.display = 'block';
                errorDiv.classList.add('error-slide-in');
                
                // Remove a mensagem ap√≥s 2.5 segundos
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                    errorDiv.classList.remove('error-slide-in');
                }, 2500);
            }

            shakeCurrentRow() {
                const currentRowElement = document.getElementById(`row-${this.currentRow}`);
                if (currentRowElement) {
                    currentRowElement.classList.add('shake');
                    
                    // Remove a classe de shake ap√≥s a anima√ß√£o
                    setTimeout(() => {
                        currentRowElement.classList.remove('shake');
                    }, 600);
                }
            }

            showMessage(text, type) {
                // M√©todo mantido para compatibilidade, mas agora usa showErrorMessage para erros
                if (type === 'error') {
                    this.showErrorMessage(text);
                    return;
                }
                
                const messageDiv = document.getElementById('message');
                messageDiv.textContent = text;
                messageDiv.className = `message ${type}`;
                
                setTimeout(() => {
                    if (type === 'error') {
                        messageDiv.textContent = '';
                        messageDiv.className = 'message';
                    }
                }, 3000);
            }
        }

        // Fun√ß√£o utilit√°ria para normalizar C/√á
        function normalizeCcedil(str) {
            return str.replace(/√á/g, 'C');
        }
        // Fun√ß√£o para corrigir exibi√ß√£o de √á
        function restoreCcedil(input, target) {
            let result = '';
            for (let i = 0; i < input.length; i++) {
                if (target[i] === '√á') {
                    result += '√á';
                } else {
                    result += input[i];
                }
            }
            return result;
        }

        // Fun√ß√µes para controlar modais
        function closeDailyLimitModal() {
            document.getElementById('dailyLimitModal').classList.remove('show');
        }

        function closeFinalResultModal() {
            document.getElementById('finalResultModal').classList.remove('show');
        }

        // Eventos dos modais
        document.getElementById('closeDailyLimitModal').onclick = closeDailyLimitModal;
        document.getElementById('dailyLimitModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('dailyLimitModal')) {
                closeDailyLimitModal();
            }
        });

        document.getElementById('closeFinalResultModal').onclick = closeFinalResultModal;
        document.getElementById('finalResultModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('finalResultModal')) {
                closeFinalResultModal();
            }
        });

        // SISTEMA DE TECLADO F√çSICO ULTRA SIMPLES - VERS√ÉO FINAL
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializa o jogo
            new ChaveGame();
            
            // Aguarda inicializa√ß√£o completa
            setTimeout(function() {
                console.log('üéÆ Configurando teclado f√≠sico...');
                
                // Event listener SUPER SIMPLES para teclado f√≠sico
                document.addEventListener('keydown', function(event) {
                    // Logs b√°sicos
                    console.log('‚å®Ô∏è Tecla:', event.key, 'Element ativo:', document.activeElement.tagName);
                    
                    // Verifica se o jogo existe
                    if (!window.gameInstance) {
                        console.log('‚ùå Jogo n√£o encontrado');
                        return;
                    }
                    
                    // Verifica se est√° em um input de texto REAL (n√£o as caixas do jogo)
                    const activeElement = document.activeElement;
                    const isRealInput = activeElement && 
                                       (activeElement.tagName === 'INPUT' || 
                                        activeElement.tagName === 'TEXTAREA') &&
                                       !activeElement.id.includes('mobileInput'); // Exclui o input invis√≠vel
                    
                    if (isRealInput) {
                        console.log('üìù Input de formul√°rio ativo, ignorando');
                        return;
                    }
                    
                    // Verifica se h√° modal aberto
                    const hasOpenModal = document.querySelector('.modal-overlay.show') !== null;
                    if (hasOpenModal) {
                        console.log('üìã Modal aberto, ignorando');
                        return;
                    }
                    
                    // ENTER - Execu√ß√£o direta
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        console.log('üöÄ ENTER pressionado!');
                        
                        try {
                            window.gameInstance.handleEnterInput();
                            console.log('‚úÖ ENTER processado');
                        } catch (e) {
                            console.error('‚ùå Erro no ENTER:', e);
                        }
                        return;
                    }
                    
                    // BACKSPACE - Execu√ß√£o direta
                    if (event.key === 'Backspace') {
                        event.preventDefault();
                        console.log('‚¨ÖÔ∏è BACKSPACE pressionado!');
                        
                        try {
                            window.gameInstance.handleBackspaceInput();
                            console.log('‚úÖ BACKSPACE processado');
                        } catch (e) {
                            console.error('‚ùå Erro no BACKSPACE:', e);
                        }
                        return;
                    }
                    
                    // LETRAS A-Z - Execu√ß√£o direta
                    if (event.key.match(/^[a-zA-Z]$/)) {
                        event.preventDefault();
                        const letra = event.key.toUpperCase();
                        console.log('üî§ LETRA pressionada:', letra);
                        
                        try {
                            window.gameInstance.handleLetterInput(letra);
                            console.log('‚úÖ LETRA processada:', letra);
                        } catch (e) {
                            console.error('‚ùå Erro na LETRA:', e);
                        }
                        return;
                    }
                });
                
                console.log('‚úÖ Teclado f√≠sico configurado!');
                
            }, 500); // Aumentei para 500ms para garantir carregamento completo
        });

        // Fun√ß√£o para fechar o modal de instru√ß√µes
        function closeInstructionsModal() {
            document.getElementById('instructionsModal').classList.remove('show');
        }
        document.getElementById('closeModal').onclick = closeInstructionsModal;
        document.getElementById('instructionsModal').onclick = function(e) {
            if (e.target === this) closeInstructionsModal();
        };

    </script>
</body>
</html>